<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" xmlns:shiro="http://www.w3.org/1999/xhtml">
<meta charset="utf-8">
<head th:include="include :: header"></head>
<link href="/css/semantic/semantic.min.css" rel="stylesheet">

<body class="gray-bg">
<div class="ui container">

    <div class="ui top attached tabular menu">
        <a th:href="@{/chengguo_personal/personal_ten_years(proId=${proId},taskId=${taskId},applyId=${applyId} )}" class="item">列表</a>
        <a href="#" class="active item"> 新增 </a>

    </div>


    <div class="ui bottom attached segment">
        <form   class="ui form" id="signupForm">

            <input id="proId" name="proId" th:value="${proId}"  type="hidden">
            <input id="taskId" name="taskId" th:value="${taskId}"  type="hidden">
            <input id="applyId" name="applyId" th:value="${applyId}"  type="hidden">
            <input id="id" name="id" type="hidden"  th:value="${tenYearsPatent.id}"  >

            <div class="field">
                <label>类型</label>
                <div class="ui selection dropdown">
                    <input type="hidden" th:value="${tenYearsPatent.indicatorIndex}" id="type" name="type">

                    <i class="dropdown icon"></i>
                    <div class="default text"   >类型</div>
                    <div class="menu">
                        <div class="item" data-value="1">1、近五年内由申报人参与完成并取得授权的专利</div>
                        <div class="item" data-value="2">2、近五年内由申报人参与完成并获批工法</div>
                        <div class="item" data-value="3">3、近五年内由申报人参与完成并通过具有科技成果鉴定权机构鉴定的科技成果(不含QC)</div>
                        <div class="item" data-value="4">4、近五年内由申报人参与完成的成果所获科技类奖项（不含QC）</div>
                        <div class="item" data-value="5">5、近五年内由申报人参与完成并公开发表、发行的论文及专著</div>
                        <div class="item" data-value="6">6. 近五年内申报人获得的科技类个人荣誉（称号）奖</div>
                    </div>
                </div>
            </div>
            <div class="field">
                <label class="m-title">专利名称</label>
                <input type="text" id="title" name="title" th:value="${tenYearsPatent.name}"   autocomplete="off" au placeholder="专利名称" >
            </div>
            <div class="field">
                <label class="m-detailed">类型（发明、实用新型、外观设计）</label>
                <textarea id="detailed" autofocus name="detailed" placeholder="类型（发明、实用新型、外观设计）" class="form-control" required="" aria-required="true"
                          th:text="${tenYearsPatent.type}"></textarea>
            </div>
            <div class="field">
                <label class="m-effect">所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）</label>

                <textarea id="effect" name="effect" th:text="${tenYearsPatent.effect}" placeholder="所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）"
                          style="height: 260px;" class="form-control" required=""
                          aria-required="true"></textarea>



            </div>
            <div class="ui basic center aligned segment">


                <!--<div th:if="${tenYearsPatent.id > 0}" class="col-sm-4 col-sm-offset-2">-->
                    <!--<button class="btn btn-primary" type="submit">保存内容</button>-->
                <!--</div>-->


                <button class="ui button" onclick="saveTenYear()">保存</button>
            </div>
        </form>


    </div>
    <div>
             <p style="color:red;">
                 注：<br>
                 1.以上各项必须提供相关奖状、证书及能说明申报者所起作用的证明材料，否则视为无效；<br/>   
                 2.表格行数可自行增加。<br/>
             </p>
    </div>
</div>

<script type="text/javascript" src="/js/jquery.min.js"></script>

<script type="text/javascript" src="/js/semantic/semantic.min.js"></script>

<script src="js/plugins/layer/laydate/laydate.js" type="text/javascript"></script>



<div th:include="include :: footer"></div>


<script type="text/javascript" src="/js/appjs/system/enterpriPersonalInfoTenYearsPatent/add.js?v=1.0"></script>

<script>
    let proId = $("#proId").val();
    let uploadObj =  {
        url : '/common/sysFile/upload?action=image&fileType=simditorQc&proId=' + proId, //文件上传的接口地址
        params: null, //键值对,指定文件上传接口的额外参数,上传的时候随文件一起提交
        fileKey: 'file[]', //服务器端获取文件数据的参数名
        connectionCount: 3,
        leaveConfirm: '正在上传文件'
    };


    var effect = new Simditor({
        textarea: $("#effect"),
        defaultImage: "/img/p3.jpg",
        upload : uploadObj,
        pasteImage: true
    });
    var detailed = new Simditor({
        textarea: $("#detailed"),
        defaultImage: "/img/p3.jpg",
        upload : uploadObj,
        pasteImage: true
    });
    $('.ui.dropdown').dropdown();
    var id = $("#id").val();
    if(id && id > 0) {
        var selVal = $("#type").val();
        $('.ui.dropdown').dropdown('set selected', selVal);
        var txt =  $('.ui.dropdown').dropdown('get text');
        var str = " <input type=\"hidden\" value=\""+selVal+"\" id=\"type\" name=\"type\">" +
            txt;
        $('.ui.dropdown').html(str);
        //变更类型对应的标签
        selType();
    }


    $('.ui.form').form({
        on:'blur',
        fields :{
            title: {
                identifier  : 'title',
                rules: [
                    {
                        type   : 'empty'
                    }
                ]
            },
            detailed: {
                identifier  : 'detailed',
                rules: [
                    {
                        type   : 'empty'
                    }
                ]
            },
            effect: {
                identifier  : 'effect',
                rules: [
                    {
                        type   : 'empty'
                    }
                ]
            }
        }
    });

    function selType() {
        if($("input[name='type']").val() == "1"){
            $(".m-title").text("专利名称");
            $(".m-detailed").text("类型（发明、实用新型、外观设计）");
            $(".m-effect").text("所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
            $("input[name='title']").attr("placeholder","专利名称");
            $("input[name='detailed']").attr("placeholder","类型（发明、实用新型、外观设计）");
            $("input[name='effect']").attr("placeholder","所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
        } else if($("input[name='type']").val() == "2"){
            $(".m-title").text("工法名称");
            $(".m-detailed").text("审批机构");
            $(".m-effect").text("所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
            $("input[name='title']").attr("placeholder","工法名称");
            $("input[name='detailed']").attr("placeholder","审批机构");
            $("input[name='effect']").attr("placeholder","所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
        } else if($("input[name='type']").val() == "3"){
            $(".m-title").text("成果名称");
            $(".m-detailed").text("鉴定结论（国际领先、国际先进、国内领先、国内先进）");
            $(".m-effect").text("所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
            $("input[name='title']").attr("placeholder","成果名称");
            $("input[name='detailed']").attr("placeholder","鉴定结论（国际领先、国际先进、国内领先、国内先进）");
            $("input[name='effect']").attr("placeholder","所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
        } else if($("input[name='type']").val() == "4"){
            $(".m-title").text("成果名称及获奖等级");
            $(".m-detailed").text("奖项名称及发奖机构");
            $(".m-effect").text("所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
            $("input[name='title']").attr("placeholder","成果名称及获奖等级");
            $("input[name='detailed']").attr("placeholder","奖项名称及发奖机构");
            $("input[name='effect']").attr("placeholder","所起作用（主持完成排名1~2、主要参加完成排名3~5、排名6及以后）");
        } else if($("input[name='type']").val() == "5"){
            $(".m-title").text("名称及发表（发行）时间");
            $(".m-detailed").text("类别（著作、期刊、会议论文）");
            $(".m-effect").text("所起作用（第一完成人，其他）");
            $("input[name='title']").attr("placeholder","名称及发表（发行）时间");
            $("input[name='detailed']").attr("placeholder","类别（著作、期刊、会议论文）");
            $("input[name='effect']").attr("placeholder","所起作用（第一完成人，其他）");
        } else if($("input[name='type']").val() == "6"){
            $(".m-title").text("荣誉名称");
            $(".m-detailed").text("发奖机构");
            $(".m-effect").text("获奖年份");
            $("input[name='title']").attr("placeholder","荣誉名称");
            $("input[name='detailed']").attr("placeholder","发奖机构");
            $("input[name='effect']").attr("placeholder","获奖年份");
        }
    }

    $("input[name='type']").change(function(e){
        selType();
    });

</script>


</body>

</html>

